"use strict";const e=require("vue"),f=require("./const.js"),p=require("./methods.js"),E=require("./filters.js"),B={class:"cssom_legend"},k={class:"cssom_legend__wrapper"},L={class:"cssom_legend__text"},N=e.defineComponent({__name:"cssomLegend",props:{ecInstance:{},eventName:{default:"finished"}},setup(l){const r=e.inject(f.cssomLegendInjectKey,void 0),a=e.shallowRef(),d=e.ref();function _(n){var c;const s=((c=d.value)==null?void 0:c.series)??[],t=s.at(n)??s.at(0);return t?((t==null?void 0:t.data)??[]).map(i=>E.normalizeLegendName(t,i)):[]}const g=e.computed(()=>{var n;return((n=d.value)==null?void 0:n.legend)??[]});function m(){d.value=this.getOption()}function v(){var n;(n=a.value)==null||n.on(l.eventName,m)}function u(){var n;(n=a.value)==null||n.off(l.eventName,m)}return e.watchPostEffect(()=>{var n;a.value=l.ecInstance??((n=r==null?void 0:r.value)==null?void 0:n.ec),u(),v()}),e.onScopeDispose(()=>{u()}),(n,s)=>(e.openBlock(),e.createElementBlock("div",B,[e.createElementVNode("div",k,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(g.value,(t,o)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["cssom_legend__legend",[`cssom_legend--box-${o}`]]),style:e.normalizeStyle(e.unref(p.getCustomLegendProperty)(t)),key:o},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(_(o),(c,i)=>(e.openBlock(),e.createElementBlock("div",{class:"cssom_legend__legend_item",key:i},[s[0]||(s[0]=e.createElementVNode("div",{class:"cssom_legend__rect"},null,-1)),e.createElementVNode("div",L,e.toDisplayString(c),1)]))),128))],6))),128))])]))}});module.exports=N;
